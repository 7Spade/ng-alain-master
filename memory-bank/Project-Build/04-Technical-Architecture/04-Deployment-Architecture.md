# éƒ¨ç½²æ¶æ§‹è¨­è¨ˆ

## ğŸ“‹ éƒ¨ç½²æ¦‚è¿°

Project-Build ç³»çµ±æ¡ç”¨å®¹å™¨åŒ–éƒ¨ç½²ï¼ŒåŸºæ–¼ Kubernetes é€²è¡Œç·¨æ’ç®¡ç†ã€‚

### ğŸ¯ éƒ¨ç½²ç›®æ¨™
- æ”¯æŒå¤šç’°å¢ƒéƒ¨ç½²
- å¯¦ç¾è‡ªå‹•åŒ–éƒ¨ç½²
- ä¿è­‰é«˜å¯ç”¨æ€§
- æ”¯æŒå½ˆæ€§æ“´å±•
- æä¾›ç›£æ§å‘Šè­¦

## ğŸ—ï¸ éƒ¨ç½²æ¶æ§‹

### éƒ¨ç½²ç’°å¢ƒ
- **é–‹ç™¼ç’°å¢ƒ**: é–‹ç™¼æ¸¬è©¦
- **æ¸¬è©¦ç’°å¢ƒ**: åŠŸèƒ½æ¸¬è©¦
- **é ç™¼å¸ƒç’°å¢ƒ**: ç”Ÿç”¢å‰æ¸¬è©¦
- **ç”Ÿç”¢ç’°å¢ƒ**: æ­£å¼é‹è¡Œ

### éƒ¨ç½²æ¶æ§‹åœ–
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    éƒ¨ç½²æ¶æ§‹åœ–                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è² è¼‰å‡è¡¡å±¤                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Nginx     â”‚   Kong      â”‚   HAProxy   â”‚   F5        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Kubernetes é›†ç¾¤                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Master     â”‚  Node 1     â”‚  Node 2     â”‚  Node 3     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ‡‰ç”¨æœå‹™å±¤                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Frontend   â”‚  API Gatewayâ”‚  Microservicesâ”‚  Database  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•¸æ“šå­˜å„²å±¤                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ PostgreSQL  â”‚   Redis     â”‚  MongoDB    â”‚  MinIO      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ å®¹å™¨åŒ–è¨­è¨ˆ

### Docker é¡åƒ
```dockerfile
# å‰ç«¯é¡åƒ
FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]

# å¾Œç«¯é¡åƒ
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
EXPOSE 3000
CMD ["npm", "start"]
```

### Kubernetes é…ç½®
```yaml
# å‰ç«¯éƒ¨ç½²
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frontend
spec:
  replicas: 3
  selector:
    matchLabels:
      app: frontend
  template:
    metadata:
      labels:
        app: frontend
    spec:
      containers:
      - name: frontend
        image: project-build/frontend:latest
        ports:
        - containerPort: 80
        resources:
          requests:
            memory: "128Mi"
            cpu: "100m"
          limits:
            memory: "256Mi"
            cpu: "200m"

---
# æœå‹™é…ç½®
apiVersion: v1
kind: Service
metadata:
  name: frontend-service
spec:
  selector:
    app: frontend
  ports:
  - port: 80
    targetPort: 80
  type: LoadBalancer
```

## ğŸš€ éƒ¨ç½²ç­–ç•¥

### è—ç¶ éƒ¨ç½²
- **è—ç’°å¢ƒ**: ç•¶å‰ç”Ÿç”¢ç’°å¢ƒ
- **ç¶ ç’°å¢ƒ**: æ–°ç‰ˆæœ¬ç’°å¢ƒ
- **åˆ‡æ›**: ä¸€éµåˆ‡æ›
- **å›æ»¾**: å¿«é€Ÿå›æ»¾

### æ»¾å‹•æ›´æ–°
- **åˆ†æ‰¹æ›´æ–°**: åˆ†æ‰¹æ›´æ–°å¯¦ä¾‹
- **å¥åº·æª¢æŸ¥**: æ›´æ–°å¾Œå¥åº·æª¢æŸ¥
- **è‡ªå‹•å›æ»¾**: å¤±æ•—è‡ªå‹•å›æ»¾
- **é›¶åœæ©Ÿ**: é›¶åœæ©Ÿæ›´æ–°

### é‡‘çµ²é›€éƒ¨ç½²
- **å°æµé‡**: å°éƒ¨åˆ†æµé‡
- **ç›£æ§**: å¯¦æ™‚ç›£æ§
- **é€æ­¥æ“´å¤§**: é€æ­¥æ“´å¤§æµé‡
- **å…¨é‡ç™¼å¸ƒ**: ç¢ºèªç„¡å•é¡Œå¾Œå…¨é‡

## ğŸ“Š é…ç½®ç®¡ç†

### ConfigMap
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  database_url: "postgresql://user:pass@db:5432/db"
  redis_url: "redis://redis:6379"
  api_base_url: "https://api.project-build.com"
```

### Secret
```yaml
apiVersion: v1
kind: Secret
metadata:
  name: app-secrets
type: Opaque
data:
  database_password: <base64-encoded-password>
  jwt_secret: <base64-encoded-secret>
  api_key: <base64-encoded-key>
```

## ğŸ” å®‰å…¨é…ç½®

### ç¶²çµ¡ç­–ç•¥
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: app-network-policy
spec:
  podSelector:
    matchLabels:
      app: frontend
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - podSelector:
        matchLabels:
          app: nginx
    ports:
    - protocol: TCP
      port: 80
```

### RBAC é…ç½®
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: app-role
rules:
- apiGroups: [""]
  resources: ["pods", "services"]
  verbs: ["get", "list", "watch"]
```

## ğŸ“ˆ ç›£æ§é…ç½®

### Prometheus é…ç½®
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: prometheus-config
data:
  prometheus.yml: |
    global:
      scrape_interval: 15s
    scrape_configs:
    - job_name: 'kubernetes-pods'
      kubernetes_sd_configs:
      - role: pod
```

### Grafana å„€è¡¨æ¿
- **ç³»çµ±ç›£æ§**: CPUã€å…§å­˜ã€ç£ç›¤
- **æ‡‰ç”¨ç›£æ§**: éŸ¿æ‡‰æ™‚é–“ã€éŒ¯èª¤ç‡
- **æ¥­å‹™ç›£æ§**: ç”¨æˆ¶æ•¸ã€è«‹æ±‚æ•¸
- **å‘Šè­¦é…ç½®**: ç•°å¸¸å‘Šè­¦

## ğŸ”„ CI/CD æµç¨‹

### GitLab CI é…ç½®
```yaml
stages:
  - build
  - test
  - deploy

build:
  stage: build
  script:
    - docker build -t $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA .
    - docker push $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA

test:
  stage: test
  script:
    - npm run test
    - npm run e2e

deploy:
  stage: deploy
  script:
    - kubectl set image deployment/frontend frontend=$CI_REGISTRY_IMAGE:$CI_COMMIT_SHA
    - kubectl rollout status deployment/frontend
```

### Jenkins é…ç½®
- **è§¸ç™¼å™¨**: Git æäº¤è§¸ç™¼
- **æ§‹å»º**: Docker é¡åƒæ§‹å»º
- **æ¸¬è©¦**: è‡ªå‹•åŒ–æ¸¬è©¦
- **éƒ¨ç½²**: è‡ªå‹•éƒ¨ç½²

## ğŸ“Š æ—¥èªŒç®¡ç†

### ELK Stack
- **Elasticsearch**: æ—¥èªŒå­˜å„²
- **Logstash**: æ—¥èªŒè™•ç†
- **Kibana**: æ—¥èªŒå¯è¦–åŒ–
- **Filebeat**: æ—¥èªŒæ”¶é›†

### æ—¥èªŒé…ç½®
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: logstash-config
data:
  logstash.conf: |
    input {
      beats {
        port => 5044
      }
    }
    filter {
      if [fields][service] == "frontend" {
        mutate {
          add_field => { "service_type" => "frontend" }
        }
      }
    }
    output {
      elasticsearch {
        hosts => ["elasticsearch:9200"]
      }
    }
```

## ğŸ”„ å‚™ä»½æ¢å¾©

### æ•¸æ“šå‚™ä»½
- **æ•¸æ“šåº«å‚™ä»½**: æ¯æ—¥å…¨é‡å‚™ä»½
- **æ–‡ä»¶å‚™ä»½**: å¯¦æ™‚åŒæ­¥å‚™ä»½
- **é…ç½®å‚™ä»½**: ç‰ˆæœ¬æ§åˆ¶å‚™ä»½
- **é¡åƒå‚™ä»½**: é¡åƒå€‰åº«å‚™ä»½

### ç½é›£æ¢å¾©
- **RTO**: æ¢å¾©æ™‚é–“ç›®æ¨™ < 4 å°æ™‚
- **RPO**: æ¢å¾©é»ç›®æ¨™ < 1 å°æ™‚
- **ç•°åœ°å‚™ä»½**: ç•°åœ°ç½å‚™
- **æ¢å¾©æ¸¬è©¦**: å®šæœŸæ¢å¾©æ¸¬è©¦

---

**ğŸ“‹ éƒ¨ç½²æ¶æ§‹æª¢æŸ¥æ¸…å–®**
- [ ] éƒ¨ç½²ç’°å¢ƒè¨­è¨ˆå®Œæˆ
- [ ] å®¹å™¨åŒ–è¨­è¨ˆå®Œæˆ
- [ ] Kubernetes é…ç½®å®Œæˆ
- [ ] éƒ¨ç½²ç­–ç•¥è¨­è¨ˆå®Œæˆ
- [ ] é…ç½®ç®¡ç†å®Œæˆ
- [ ] å®‰å…¨é…ç½®å®Œæˆ
- [ ] ç›£æ§é…ç½®å®Œæˆ
- [ ] CI/CD æµç¨‹å®Œæˆ
- [ ] æ—¥èªŒç®¡ç†å®Œæˆ
- [ ] å‚™ä»½æ¢å¾©å®Œæˆ