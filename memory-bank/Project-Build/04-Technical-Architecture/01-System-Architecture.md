# æŠ€è¡“æ¶æ§‹ç¸½è¦½

## ğŸ“‹ æ¶æ§‹æ¦‚è¿°

Project-Build å°ˆæ¡ˆç®¡ç†æ¡†æ¶æ¡ç”¨ç¾ä»£åŒ–çš„æŠ€è¡“æ¶æ§‹ï¼ŒåŸºæ–¼ Angular 20 + ng-alain + ng-zorro-antd æ§‹å»ºï¼Œæä¾›å®Œæ•´çš„å°ˆæ¡ˆç®¡ç†è§£æ±ºæ–¹æ¡ˆã€‚

### ğŸ¯ æŠ€è¡“ç›®æ¨™
- æ¡ç”¨å¾®æœå‹™æ¶æ§‹ï¼Œæ”¯æŒæ°´å¹³æ“´å±•
- ä½¿ç”¨ç¾ä»£åŒ–å‰ç«¯æŠ€è¡“æ£§
- å¯¦ç¾å‰å¾Œç«¯åˆ†é›¢
- æ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²
- æä¾›å®Œæ•´çš„ç›£æ§å’Œæ—¥èªŒ

## ğŸ—ï¸ æ•´é«”æ¶æ§‹

## ğŸ—ï¸ æ•´é«”æ¶æ§‹

### ç³»çµ±æ¶æ§‹åœ–
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Client Layer (Angular 20)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Project   â”‚  â”‚     BIM      â”‚  â”‚    Cost     â”‚         â”‚
â”‚  â”‚ Management  â”‚  â”‚ Management  â”‚  â”‚ Management  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚    Task     â”‚  â”‚  Document    â”‚  â”‚  Progress   â”‚         â”‚
â”‚  â”‚  Workflow   â”‚  â”‚ Management   â”‚  â”‚  Tracking   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Service Layer (Firebase)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Firebase  â”‚  â”‚  Firebase   â”‚  â”‚  Firebase   â”‚         â”‚
â”‚  â”‚    Auth     â”‚  â”‚  Firestore  â”‚  â”‚  Storage    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Firebase   â”‚  â”‚  Firebase   â”‚  â”‚  Firebase   â”‚         â”‚
â”‚  â”‚ Data Connectâ”‚  â”‚  Functions  â”‚  â”‚  Analytics  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Data Layer (PostgreSQL)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Projects   â”‚  â”‚    BIM      â”‚  â”‚    Cost     â”‚         â”‚
â”‚  â”‚   Tables    â”‚  â”‚   Models    â”‚  â”‚   Tables    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚    Task     â”‚  â”‚  Document   â”‚  â”‚  Progress  â”‚         â”‚
â”‚  â”‚   Tables    â”‚  â”‚   Tables    â”‚  â”‚   Tables   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ æŠ€è¡“å¯¦ç¾ç´°ç¯€

### Angular 20 ç¾ä»£åŒ–ç‰¹æ€§
```typescript
// ä½¿ç”¨ Angular 20 çš„ inject() å‡½æ•¸
export class ProjectService {
  private firestore = inject(Firestore);
  private storage = inject(AngularFireStorage);
  private authService = inject(AuthService);
  
  // ä½¿ç”¨ standalone components
  @Component({
    selector: 'app-project-card',
    standalone: true,
    imports: [CommonModule, NzCardModule, NzButtonModule],
    changeDetection: ChangeDetectionStrategy.OnPush
  })
  export class ProjectCardComponent {
    // çµ„ä»¶å¯¦ç¾
  }
}

// ä½¿ç”¨ provideHttpClient å’Œ provideRouter
export const appConfig: ApplicationConfig = {
  providers: [
    provideHttpClient(withInterceptors([authInterceptor, errorInterceptor])),
    provideRouter(routes, withComponentInputBinding(), withViewTransitions()),
    provideFirebaseApp(() => initializeApp(firebaseConfig)),
    provideFirestore(() => getFirestore()),
    provideAuth(() => getAuth()),
    provideStorage(() => getStorage()),
    provideTanStackQuery(new QueryClient({
      defaultOptions: {
        queries: {
          staleTime: 5 * 60 * 1000, // 5 minutes
          cacheTime: 10 * 60 * 1000, // 10 minutes
        },
      },
    }))
  ]
};
```

### Firebase å®Œæ•´é›†æˆ
```typescript
// Firebase é…ç½®
export const firebaseConfig = {
  apiKey: "AIzaSyCJ-eayGjJwBKsNIh3oEAG2GjbfTrvAMEI",
  authDomain: "elite-chiller-455712-c4.firebaseapp.com",
  projectId: "elite-chiller-455712-c4",
  storageBucket: "elite-chiller-455712-c4.firebasestorage.app",
  messagingSenderId: "7807661688",
  appId: "1:7807661688:web:ff2a2fcd4ff3d8451d1f8d",
  measurementId: "G-CY8DV4DD7J"
};

// Firebase æœå‹™é›†æˆ
export class FirebaseIntegrationService {
  private firestore = inject(Firestore);
  private auth = inject(Auth);
  private storage = inject(Storage);
  private analytics = inject(Analytics);
  private appCheck = inject(AppCheck);
  
  // å¯¦æ™‚æ•¸æ“šåŒæ­¥
  subscribeToProjects(): Observable<Project[]> {
    const projectsRef = collection(this.firestore, 'projects');
    const q = query(projectsRef, orderBy('updatedAt', 'desc'));
    
    return new Observable(subscriber => {
      const unsubscribe = onSnapshot(q, (snapshot) => {
        const projects = snapshot.docs.map(doc => ({
          id: doc.id,
          ...doc.data()
        } as Project));
        subscriber.next(projects);
      }, (error) => {
        subscriber.error(error);
      });
      
      return () => unsubscribe();
    });
  }
  
  // æ–‡ä»¶ä¸Šå‚³
  uploadFile(file: File, path: string): Observable<string> {
    const storageRef = ref(this.storage, path);
    const uploadTask = uploadBytesResumable(storageRef, file);
    
    return new Observable(subscriber => {
      uploadTask.on('state_changed',
        (snapshot) => {
          const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
          subscriber.next({ progress, status: 'uploading' });
        },
        (error) => {
          subscriber.error(error);
        },
        () => {
          getDownloadURL(uploadTask.snapshot.ref).then(downloadURL => {
            subscriber.next({ downloadURL, status: 'completed' });
            subscriber.complete();
          });
        }
      );
    });
  }
}
```

### PostgreSQL æ•¸æ“šåº«è¨­è¨ˆ
```sql
-- å°ˆæ¡ˆè¡¨
CREATE TABLE projects (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(100) NOT NULL,
    description TEXT,
    type VARCHAR(50) NOT NULL,
    status VARCHAR(20) NOT NULL DEFAULT 'PLANNING',
    visibility VARCHAR(20) NOT NULL DEFAULT 'PRIVATE',
    avatar VARCHAR(255),
    start_date TIMESTAMP,
    end_date TIMESTAMP,
    created_by UUID NOT NULL,
    organization_id UUID,
    settings JSONB DEFAULT '{}',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- å°ˆæ¡ˆæˆå“¡è¡¨
CREATE TABLE project_members (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID NOT NULL REFERENCES projects(id) ON DELETE CASCADE,
    user_id UUID NOT NULL,
    role VARCHAR(50) NOT NULL,
    permissions JSONB DEFAULT '{}',
    status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE',
    joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    invited_by UUID,
    UNIQUE(project_id, user_id)
);

-- BIM æ¨¡å‹è¡¨
CREATE TABLE bim_models (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID NOT NULL REFERENCES projects(id) ON DELETE CASCADE,
    name VARCHAR(255) NOT NULL,
    file_name VARCHAR(255) NOT NULL,
    file_size BIGINT NOT NULL,
    file_format VARCHAR(20) NOT NULL,
    download_url VARCHAR(500),
    status VARCHAR(20) NOT NULL DEFAULT 'UPLOADING',
    upload_progress INTEGER DEFAULT 0,
    processing_progress INTEGER DEFAULT 0,
    uploaded_by UUID NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æˆæœ¬é …ç›®è¡¨
CREATE TABLE cost_items (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID NOT NULL REFERENCES projects(id) ON DELETE CASCADE,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    category VARCHAR(100) NOT NULL,
    unit VARCHAR(50),
    quantity DECIMAL(15,2),
    unit_price DECIMAL(15,2),
    total_price DECIMAL(15,2),
    status VARCHAR(20) NOT NULL DEFAULT 'PLANNED',
    created_by UUID NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ä»»å‹™è¡¨
CREATE TABLE tasks (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID NOT NULL REFERENCES projects(id) ON DELETE CASCADE,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    status VARCHAR(20) NOT NULL DEFAULT 'TODO',
    priority VARCHAR(20) NOT NULL DEFAULT 'MEDIUM',
    assignee_id UUID,
    due_date TIMESTAMP,
    estimated_hours DECIMAL(8,2),
    actual_hours DECIMAL(8,2),
    progress INTEGER DEFAULT 0,
    created_by UUID NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- å‰µå»ºç´¢å¼•
CREATE INDEX idx_projects_created_by ON projects(created_by);
CREATE INDEX idx_projects_organization_id ON projects(organization_id);
CREATE INDEX idx_projects_status ON projects(status);
CREATE INDEX idx_projects_updated_at ON projects(updated_at);

CREATE INDEX idx_project_members_project_id ON project_members(project_id);
CREATE INDEX idx_project_members_user_id ON project_members(user_id);
CREATE INDEX idx_project_members_status ON project_members(status);

CREATE INDEX idx_bim_models_project_id ON bim_models(project_id);
CREATE INDEX idx_bim_models_status ON bim_models(status);
CREATE INDEX idx_bim_models_uploaded_by ON bim_models(uploaded_by);

CREATE INDEX idx_cost_items_project_id ON cost_items(project_id);
CREATE INDEX idx_cost_items_category ON cost_items(category);
CREATE INDEX idx_cost_items_status ON cost_items(status);

CREATE INDEX idx_tasks_project_id ON tasks(project_id);
CREATE INDEX idx_tasks_assignee_id ON tasks(assignee_id);
CREATE INDEX idx_tasks_status ON tasks(status);
CREATE INDEX idx_tasks_due_date ON tasks(due_date);
```

### æ€§èƒ½å„ªåŒ–ç­–ç•¥
```typescript
// è™›æ“¬æ»¾å‹•å¯¦ç¾
@Component({
  selector: 'app-project-list',
  template: `
    <cdk-virtual-scroll-viewport 
      itemSize="200" 
      class="viewport"
      [dataSource]="dataSource">
      <div *cdkVirtualFor="let project of dataSource.data" 
           class="project-item">
        <app-project-card [project]="project"></app-project-card>
      </div>
    </cdk-virtual-scroll-viewport>
  `,
  styles: [`
    .viewport {
      height: 400px;
      width: 100%;
    }
    
    .project-item {
      height: 200px;
      padding: 8px;
    }
  `]
})
export class ProjectListComponent {
  dataSource = new DataSource<Project>();
  
  constructor() {
    this.dataSource.data = this.projects;
  }
}

// æ‡¶åŠ è¼‰å¯¦ç¾
const routes: Routes = [
  {
    path: 'project-build',
    loadChildren: () => import('./routes/project-build/project-build.module')
      .then(m => m.ProjectBuildModule)
  },
  {
    path: 'project-build/bim',
    loadChildren: () => import('./routes/project-build/bim-management/bim-management.module')
      .then(m => m.BIMManagementModule)
  },
  {
    path: 'project-build/cost',
    loadChildren: () => import('./routes/project-build/cost-management/cost-management.module')
      .then(m => m.CostManagementModule)
  }
];

// ç·©å­˜ç­–ç•¥
@Injectable()
export class ProjectCacheService {
  private cache = new Map<string, any>();
  private cacheTimeout = 5 * 60 * 1000; // 5 minutes
  
  set(key: string, value: any): void {
    this.cache.set(key, {
      value,
      timestamp: Date.now()
    });
  }
  
  get(key: string): any | null {
    const cached = this.cache.get(key);
    if (!cached) return null;
    
    if (Date.now() - cached.timestamp > this.cacheTimeout) {
      this.cache.delete(key);
      return null;
    }
    
    return cached.value;
  }
  
  clear(): void {
    this.cache.clear();
  }
}
```

### å®‰å…¨æªæ–½
```typescript
// æ¬Šé™å®ˆè¡›
@Injectable()
export class ProjectAccessGuard implements CanActivate {
  private authService = inject(AuthService);
  private projectService = inject(ProjectService);
  private router = inject(Router);
  
  canActivate(route: ActivatedRouteSnapshot): Observable<boolean> {
    const projectId = route.params['id'];
    const requiredPermission = route.data['permission'];
    
    return this.authService.getCurrentUser().pipe(
      switchMap(user => {
        if (!user) {
          this.router.navigate(['/login']);
          return of(false);
        }
        
        return this.projectService.checkProjectAccess(projectId, user.uid, requiredPermission);
      }),
      catchError(() => {
        this.router.navigate(['/unauthorized']);
        return of(false);
      })
    );
  }
}

// æ•¸æ“šé©—è­‰
export class ProjectValidator {
  static validateProject(project: Project): ValidationResult {
    const errors: string[] = [];
    
    if (!project.name || project.name.trim().length === 0) {
      errors.push('å°ˆæ¡ˆåç¨±ä¸èƒ½ç‚ºç©º');
    }
    
    if (project.name && project.name.length > 100) {
      errors.push('å°ˆæ¡ˆåç¨±ä¸èƒ½è¶…é100å€‹å­—ç¬¦');
    }
    
    if (project.description && project.description.length > 500) {
      errors.push('å°ˆæ¡ˆæè¿°ä¸èƒ½è¶…é500å€‹å­—ç¬¦');
    }
    
    if (project.startDate && project.endDate && project.startDate > project.endDate) {
      errors.push('é–‹å§‹æ—¥æœŸä¸èƒ½æ™šæ–¼çµæŸæ—¥æœŸ');
    }
    
    return {
      isValid: errors.length === 0,
      errors
    };
  }
}

// XSS é˜²è­·
@Injectable()
export class SanitizationService {
  private sanitizer = inject(DomSanitizer);
  
  sanitizeHtml(html: string): SafeHtml {
    return this.sanitizer.sanitize(SecurityContext.HTML, html) || '';
  }
  
  sanitizeUrl(url: string): SafeUrl {
    return this.sanitizer.bypassSecurityTrustUrl(url);
  }
}
```

### ç›£æ§å’Œæ—¥èªŒ
```typescript
// æ€§èƒ½ç›£æ§
@Injectable()
export class PerformanceMonitoringService {
  private analytics = inject(Analytics);
  
  trackPageView(pageName: string): void {
    logEvent(this.analytics, 'page_view', {
      page_title: pageName,
      page_location: window.location.href
    });
  }
  
  trackUserAction(action: string, category: string, label?: string): void {
    logEvent(this.analytics, 'user_action', {
      action,
      category,
      label
    });
  }
  
  trackProjectCreation(projectType: string): void {
    logEvent(this.analytics, 'project_created', {
      project_type: projectType,
      timestamp: new Date().toISOString()
    });
  }
}

// éŒ¯èª¤ç›£æ§
@Injectable()
export class ErrorMonitoringService {
  private analytics = inject(Analytics);
  
  logError(error: Error, context?: any): void {
    logEvent(this.analytics, 'error_occurred', {
      error_message: error.message,
      error_stack: error.stack,
      context: JSON.stringify(context),
      timestamp: new Date().toISOString()
    });
  }
  
  logApiError(endpoint: string, status: number, error: any): void {
    logEvent(this.analytics, 'api_error', {
      endpoint,
      status,
      error_message: error.message,
      timestamp: new Date().toISOString()
    });
  }
}
```

## ğŸ“Š æ•¸æ“šæ¶æ§‹

### æ•¸æ“šåº«è¨­è¨ˆ
- **PostgreSQL**: æ ¸å¿ƒæ¥­å‹™æ•¸æ“š
- **Redis**: ç·©å­˜å’Œæœƒè©±
- **MongoDB**: æ–‡æª”å’Œæ—¥èªŒ
- **Elasticsearch**: æœç´¢å’Œåˆ†æ

### æ•¸æ“šæµ
1. å‰ç«¯è«‹æ±‚ â†’ API ç¶²é—œ
2. API ç¶²é—œ â†’ å¾®æœå‹™
3. å¾®æœå‹™ â†’ æ•¸æ“šåº«
4. æ•¸æ“šåº« â†’ ç·©å­˜
5. ç·©å­˜ â†’ å‰ç«¯éŸ¿æ‡‰

## ğŸ” å®‰å…¨æ¶æ§‹

### èªè­‰æˆæ¬Š
- JWT Token èªè­‰
- RBAC æ¬Šé™æ§åˆ¶
- OAuth 2.0 é›†æˆ
- å¤šå› ç´ èªè­‰

### æ•¸æ“šå®‰å…¨
- æ•¸æ“šåŠ å¯†
- å‚³è¼¸åŠ å¯†
- è¨ªå•æ§åˆ¶
- å¯©è¨ˆæ—¥èªŒ

## ğŸ“ˆ æ€§èƒ½å„ªåŒ–

### å‰ç«¯å„ªåŒ–
- æ‡¶åŠ è¼‰
- è™›æ“¬æ»¾å‹•
- åœ–ç‰‡å„ªåŒ–
- ä»£ç¢¼åˆ†å‰²

### å¾Œç«¯å„ªåŒ–
- æ•¸æ“šåº«ç´¢å¼•
- æŸ¥è©¢å„ªåŒ–
- ç·©å­˜ç­–ç•¥
- é€£æ¥æ± 

## ğŸš€ éƒ¨ç½²æ¶æ§‹

### ç’°å¢ƒé…ç½®
- é–‹ç™¼ç’°å¢ƒ
- æ¸¬è©¦ç’°å¢ƒ
- é ç™¼å¸ƒç’°å¢ƒ
- ç”Ÿç”¢ç’°å¢ƒ

### éƒ¨ç½²ç­–ç•¥
- è—ç¶ éƒ¨ç½²
- æ»¾å‹•æ›´æ–°
- é‡‘çµ²é›€éƒ¨ç½²
- è‡ªå‹•å›æ»¾

## ğŸ“Š ç›£æ§æ¶æ§‹

### æ‡‰ç”¨ç›£æ§
- æ€§èƒ½æŒ‡æ¨™
- éŒ¯èª¤è¿½è¹¤
- ç”¨æˆ¶è¡Œç‚º
- æ¥­å‹™æŒ‡æ¨™

### åŸºç¤è¨­æ–½ç›£æ§
- æœå‹™å™¨ç›£æ§
- ç¶²çµ¡ç›£æ§
- å­˜å„²ç›£æ§
- å®‰å…¨ç›£æ§

## ğŸ”„ æ“´å±•æ€§è¨­è¨ˆ

### æ°´å¹³æ“´å±•
- å¾®æœå‹™æ‹†åˆ†
- è² è¼‰å‡è¡¡
- æ•¸æ“šåˆ†ç‰‡
- ç·©å­˜é›†ç¾¤

### å‚ç›´æ“´å±•
- è³‡æºå„ªåŒ–
- æ€§èƒ½èª¿å„ª
- æ¶æ§‹é‡æ§‹
- æŠ€è¡“å‡ç´š

---

**ğŸ“‹ æŠ€è¡“æ¶æ§‹æª¢æŸ¥æ¸…å–®**
- [ ] æ•´é«”æ¶æ§‹è¨­è¨ˆå®Œæˆ
- [ ] æŠ€è¡“æ£§é¸å‹å®Œæˆ
- [ ] æ•¸æ“šæ¶æ§‹è¨­è¨ˆå®Œæˆ
- [ ] å®‰å…¨æ¶æ§‹è¨­è¨ˆå®Œæˆ
- [ ] æ€§èƒ½å„ªåŒ–ç­–ç•¥å®Œæˆ
- [ ] éƒ¨ç½²æ¶æ§‹è¨­è¨ˆå®Œæˆ
- [ ] ç›£æ§æ¶æ§‹è¨­è¨ˆå®Œæˆ
- [ ] æ“´å±•æ€§è¨­è¨ˆå®Œæˆ